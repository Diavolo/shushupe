{% extends "core/base.html" %}{% load static %}
{% block titlepage %}{% if category %}{{ category.name }} - {% elif tag %}{{ tag.name }} - {% endif %}{% endblock %}
{% block feed %}{% if category %}
  <link rel="alternate" href="{% url 'core:article-list-by-category-feed' category.slug %}" type="application/atom+xml" title="Gustavo Huarcaya - {{ category.name }}">{% elif tag %}
  <link rel="alternate" href="{% url 'core:article-list-by-tag-feed' tag.slug %}" type="application/atom+xml" title="Gustavo Huarcaya - {{ tag.name }}">{% else %}
  <link rel="alternate" href="{% url 'core:feed' %}" type="application/atom+xml" title="Gustavo Huarcaya">{% endif %}{% endblock %}
  {% block meta %}<meta name="description" content="Gustavo Huarcaya{% if category %}, anotaciones de la categoría {{ category.name }}{% elif tag %}, anotaciones del tag {{ tag.name }}{% else %}'s Weblog{% endif %}">
  <meta name="keywords" content="gustavo huarcaya, gustavo, huarcaya, {% if category %}{{ category.name }}{% elif tag %}{{ tag.name }}{% endif %}">{% endblock %}
  {% block ogp %}<meta property="og:title" content="{% if category %}{{ category.name }} - {% elif tag %}{{ tag.name }} - {% endif %}Gustavo Huarcaya">
  <meta property="og:description" content="Gustavo Huarcaya{% if category %}, anotaciones de la categoría {{ category.name }}{% elif tag %}, anotaciones del tag {{ tag.name }}{% else %}'s Weblog{% endif %}">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://{{ request.get_host }}{{ request.get_full_path }}">
  <meta property="og:site_name" content="gahd.net">
  <meta property="og:image" content="https://{{ request.get_host }}{% static 'img/inti.png' %}">{% endblock %}
{% block content %}
{% if category %}
<div class="ui text container">
  <div class="ui info icon message">
    <i class="archive icon"></i>
    <div class="content">
      <div class="header">
        {{ category.name }} <a href="{% url 'core:article-list-by-category-feed' category.slug %}"><i class="rss orange icon"></i></a>
      </div>
      <p>{{ category.content }}</p>
    </div>
  </div>
</div>
{% endif %}
{% if tag %}
<div class="ui text container">
  <div class="ui info icon message">
    <i class="tag icon"></i>
    <div class="content">
      <div class="header">
        {{ tag.name }} <a href="{% url 'core:article-list-by-tag-feed' tag.slug %}"><i class="rss orange icon"></i></a>
      </div>
      <p>{{ tag.content }}</p>
    </div>
  </div>
</div>
{% endif %}
{% if post_list %}
{% for post in post_list %}
{% if post.is_public %}
<div class="ui segment text container">
  {% if post.pub_type == 'Bookmark' %}
  <div class="ui blue right corner label">
    <i class="bookmark icon"></i>
  </div>
  {% endif %}
  <div class="column">
    <h3 class="ui header">{{ post.name }}</h3>
  </div>
  <div class="column">
    <div class="ui content">
      {{ post.content_html|safe|truncatewords_html:"25" }}
    </div>
    <div class="ui footer">
      <div class="ui aligned grid">
        <div class="two column row">
          <div class="column">
            <span class="ui small text">
              {% if post.pub_type == 'Article' %}
              <a href="{% url 'core:article-detail' post.category.slug post.slug %}">
                {{ post.updated_date|date:'DATETIME_FORMAT' }}
              </a>
              {% elif post.pub_type == 'Note' %}
              <a href="{% url 'core:note-detail' post.slug %}">
                {{ post.updated_date|date:'DATETIME_FORMAT' }}
              </a>
              {% elif post.pub_type == 'Page' %}
              <a href="{% url 'core:page-detail' post.slug %}">
                {{ post.updated_date|date:'DATETIME_FORMAT' }}
              </a>
              {% elif post.pub_type == 'Bookmark' %}
              <a href="{{ post.site_url }}">
                {{ post.updated_date|date:'DATETIME_FORMAT' }}
              </a>
              {% endif %}
            </span>
          </div>
          <div class="right aligned column">
            {% if post.tags.count %}{% for tag in post.tags.all %}
            <span class="ui small text">
              <a href="{% url 'core:article-list-by-tag' tag.slug %}">
                #{{ tag.name }}
              </a>
            </span>
            {% endfor %}{% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% elif not post.is_public and user == post.author %}
<div class="ui red segment text container">
  {% if post.pub_type == 'Bookmark' %}
  <div class="ui red right corner label">
    <i class="bookmark icon"></i>
  </div>
  {% endif %}
  <div class="column">
    <h3 class="ui header">{{ post.name }}</h3>
  </div>
  <div class="column">
    <div class="ui content">
      {{ post.content_html|safe|truncatewords_html:"25" }}
    </div>
    <div class="ui footer">
      <div class="ui aligned grid">
        <div class="two column row">
          <div class="column">
            <span class="ui small text">
              {% if post.pub_type == 'Article' %}
              <a href="{% url 'core:article-detail' post.category.slug post.slug %}">
                {{ post.updated_date|date:'DATETIME_FORMAT' }}
              </a>
              {% elif post.pub_type == 'Bookmark' %}
              <a href="{{ post.site_url }}">
                {{ post.updated_date|date:'DATETIME_FORMAT' }}
              </a>
              {% elif post.pub_type == 'Note' %}
              <a href="{% url 'core:note-detail' post.slug %}">
                {{ post.updated_date|date:'DATETIME_FORMAT' }}
              </a>
              {% elif post.pub_type == 'Page' %}
              <a href="{% url 'core:page-detail' post.slug %}">
                {{ post.updated_date|date:'DATETIME_FORMAT' }}
              </a>
              {% endif %}
            </span>
          </div>
          <div class="right aligned column">
            {% if post.tags.count %}{% for tag in post.tags.all %}
            <span class="ui small text">
              <a href="{% url 'core:article-list-by-tag' tag.slug %}">
                #{{ tag.name }}
              </a>
            </span>
            {% endfor %}{% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endif %}
{% endfor %}
{% else %}
<div class="ui segment text container">
  <div class="ui aligned grid">
    <div class="center aligned column">
      <img class="ui centered image" src="{% static 'img/cow.png' %}" alt="cow">
      <h3 class="ui header">Ouch!</h3>
      I've got nothing to show.
    </div>
  </div>
</div>
{% endif %}
{% endblock %}